# KMScript 语言支持

这个 Visual Studio Code 扩展为 KMScript 语言提供全面的语法支持。

## 功能描述

该扩展为 KMScript 文件（.km 扩展名）提供以下功能：

- 语法高亮
- 基本的语言配置（如注释、括号匹配等）
- 代码格式化

## 使用方法

安装扩展后，VS Code 将自动识别 .km 文件为 KMScript 文件。打开任何 .km 文件，您就能看到语法高亮效果。

要格式化代码，您可以使用以下方法之一：
- 使用快捷键（Windows: Shift+Alt+F, Mac: Shift+Option+F）
- 右键单击并选择"格式化文档"
- 在命令面板中搜索并执行"格式化文档"命令

## 支持的 KMScript 语法特性

- 关键字高亮（如 if、then、else、while、for、and、or 等）
- 函数名高亮（如 GetScreenResolution、FindPic、MoveTo 等）
- 字符串识别
- 注释识别（使用 // 作为行注释）
- 数字识别
- 操作符识别（包括算术、比较和逻辑操作符）
- 常量识别（如 PageDown、Enter、Esc 等）

## 格式化功能

- 支持基本的代码缩进
- 在操作符（算术、比较和逻辑）两侧添加适当的空格
- 正确处理 If-ElseIf-Else 结构和 For 循环的缩进
- 优化了对注释行的处理，保持注释的原始格式
- 正确处理双字符操作符（如 >=）的格式化
- 避免格式化影响到注释符号 "//"

## 最新更新

- 解决了格式化包含注释的行时可能导致代码重复的问题
- 优化了操作符格式化的逻辑，现在可以正确处理包含注释的行
- 改进了空格处理，避免出现多余的空格

## 已知问题

- 当前的格式化功能可能仍无法处理某些非常复杂的代码结构。

## 未来计划

1. 改进函数的高亮显示
2. 实现函数跳转功能
3. 添加函数参数提示
4. 完善代码片段（snippet）功能
5. 为函数添加符号
6. 实现函数和关键词的自动补全
7. 为函数添加参数数量信息

如果您有任何建议或遇到问题，请在我们的 GitHub 仓库中提出 issue。

感谢您使用 KMScript 语言支持扩展！
